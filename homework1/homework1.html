<!DOCTYPE html>
<html>

<head>
    <style>
    .button {
        background-color: #4CAF50; /* Green */
        border: none;
        color: white;
        padding: 15px 32px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 4px 2px;
        cursor: pointer;}

        .btngreen {background-color: #4CAF50;}
        .btnblue {background-color: #008CBA;}
        .btnred {background-color: #f44336;}
        .btnblack {background-color: #555555;}

        .slidecontainer {
        width: 100%;
        }

        .slider {
        -webkit-appearance: none;
        width: 50%;
        height: 25px;
        background: #d3d3d3;
        outline: none;
        opacity: 0.7;
        -webkit-transition: .2s;
        transition: opacity .2s;
        }

        .slider:hover {
        opacity: 1;
        }

        .slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 25px;
        height: 25px;
        background: #4CAF50;
        cursor: pointer;
        }

        .slider::-moz-range-thumb {
        width: 25px;
        height: 25px;
        background: #4CAF50;
        cursor: pointer;
        }
    </style>
</head>

 
<script id="vertex-shader" type="x-shader/x-vertex">
#version 300 es

in  vec4 aPosition;
in  vec3 aNormal;
out vec4 vColor;

uniform vec4 uPosAmbientProduct, uPosDiffuseProduct, uPosSpecularProduct;
uniform vec4 uOneDirAmbientProduct, uOneDirDiffuseProduct, uOneDirSpecularProduct;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uLightPosition;
uniform vec4 uoneDirLightPosition;

uniform float uShininess;

void main()
{
    vec3 pos = -(uModelViewMatrix * aPosition).xyz;
    vec3 N = normalize((uModelViewMatrix*vec4(aNormal,0)).xyz);

    // Positional Light
    vec3 poslight = uLightPosition.xyz;

    vec3 L = normalize(poslight - pos);
    vec3 E = normalize(-pos);
    vec3 H = normalize(L + E);

    float Kd = max(dot(L, N), 0.0);
    float Ks = pow( max(dot(N, H), 0.0), uShininess );
    vec4 posambient = uPosAmbientProduct;
    vec4 posdiffuse = Kd*uPosDiffuseProduct;
    vec4 posspecular = Ks*uPosSpecularProduct;
    if( dot(L, N) < 0.0 ) {
        posspecular = vec4(0.0, 0.0, 0.0, 1.0);
    }

    // Directional Light
    vec3 onedirlight = uoneDirLightPosition.xyz;

    L = normalize(onedirlight);
    E = normalize(-pos); 
    H = normalize(L + E);

    Kd=max(dot(L, N),0.0);    
    Ks=pow(max(dot(N, H),0.0), uShininess);
    vec4 oneDirambient = uOneDirAmbientProduct;
    vec4 oneDirposdiffuse = Kd*uOneDirDiffuseProduct;
    vec4 oneDirposspecular = Ks*uOneDirSpecularProduct;   
    if(dot(L, N)<0.0){
        oneDirposspecular = vec4(0.0,0.0,0.0,1.0);
    }

    // Spotlight

    // Combining light sources
    vec4 ambient =  posambient + oneDirambient;
    vec4 diffuse = posdiffuse + oneDirposdiffuse;
    vec4 specular = posspecular + oneDirposspecular;

    gl_Position = uProjectionMatrix * uModelViewMatrix *aPosition;
    vColor = ambient + diffuse + specular;

    vColor.a = 1.0;
}
</script>

<script id="fragment-shader" type="x-shader/x-fragment">
#version 300 es

precision mediump float;

in vec4 vColor;
out vec4 fColor;

void
main()
{
    fColor = vColor;

}
</script>

<script type="text/javascript" src="../Common/initShaders.js"></script>
<script type="text/javascript" src="../Common/MVnew.js"></script>
<script type="text/javascript" src="Homework1.js"></script>

<body>
<canvas id="gl-canvas" width="512" height="512">
Oops ... your browser doesn't support the HTML5 canvas element
</canvas>

<br/>

<p> </p>
<!-- <div>zNear .01  <input id="zNearSlider"  type="range" min=".01"  max="3"    step="0.1" value="0.3" />3  </div> -->
<p> Perspective Position </p>
<div>zNear <br/> 0.01   <input id="zNearSlider"  type="range" min=".01"  max="3"    step="0.1" value="0.3" class="slider" />3   </div>
<div>fov <br/> 10.0     <input id="fovSlider"   type="range" min="10"   max="120"  step="5"   value="45"  class="slider" />120 </div>

<br/>
<p> Viewer Position Position </p>
<div>Theta <br/> -90    <input id="thetaSlider"  type="range" min="-90.0" max="90.0" step="0.1" value="4"   class="slider" />90  </div>
<div>Phi <br/>   -90    <input id="phiSlider"    type="range" min="-90.0" max="90.0" step="0.1" value="4"   class="slider" />90  </div>
<div>radius <br/> 0.05  <input id="radiusSlider"  type="range" min="0.05" max="10"   step="0.1" value="4"   class="slider" />10  </div>
<br/>

<!-- <button id= "xButton">Rotate X</button>
<button id= "yButton" class="button btnred">Rotate Y</button>
<button id= "zButton" class="button btnred">Rotate Z</button> -->

</body>
</html>